!function(t){"use strict";t.xDialog=function(i){function o(){this._init()}return o.prototype={defaults:{id:null,width:350,height:150,model:!0,className:null,controlBtnClose:!1,controlBtnMin:!1,controlBtnMax:!1,esc:"destroy",left:null,right:null,top:null,bottom:null,target:"body",showClassName:"xDialog-slideIn",hideClassName:"xDialog-slideOut",title:"",content:"",url:"",buttons:[],onInit:function(){},onShow:function(){},onHide:function(){},onDestroy:function(){},onMin:function(){},onMax:function(){},onRestore:function(){}},options:{},$:{},_init:function(){this._setOptions(i),this._setElement(),this._setProperty(),this._setHeader(),this._setFooter(),this._setControl(),this.options.onInit(this),this.show()},_setOptions:function(i){this.options=t.extend({},this.defaults,i)},_setElement:function(){var i="",o=this.options.content;this.options.url&&(o='<iframe src="'+this.options.url+'" class="xDialog-iframe"></iframe>'),this.options.model&&(i='<div class="xDialog-mask" tabindex="1" style="z-index:'+ ++t.xDialog._zIndex+'"></div>'),i+='<div class="xDialog" tabindex="1">	<div class="xDialog-content"></div>	<div class="xDialog-control"></div></div>',this.$.fn=t(i),this.$.fn.find(".xDialog-content").append(o),"string"==typeof this.options.target?t(this.options.target).append(this.$.fn):this.options.target.append(this.$.fn),this.$.model=this.$.fn.filter(".xDialog-mask"),this.$.dialog=this.$.fn.filter(".xDialog"),this.$.content=this.$.fn.find(".xDialog-content"),this.$.control=this.$.fn.find(".xDialog-control"),this.options.url&&this.$.dialog.addClass("xDialog-url"),this.options.model&&this.$.model.on("touchmove",function(){return!1})},_setHeader:function(){if(this.options.title){var i=t('<div class="xDialog-header"><h1>'+this.options.title+"</h1></div>");this.$.content.before(i),this.$.dialog.addClass("xDialog-has-header")}},_setFooter:function(){var i=this;if(this.options.buttons.length){var o=t('<div class="xDialog-footer"></div>');t.each(this.options.buttons,function(s,n){var a=t('<a href="javascript:;" class="xDialog-btn">'+n.label+"</a>");n.className&&a.attr("class",n.className),n.width&&a.width(n.width),1==i.options.buttons.length&&a.addClass("xDialog-btn-block");var e=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);a.on(e?"touchstart":"mousedown",function(i){return t(i.target).closest("a").addClass("xActive"),!1}),a.on(e?"touchend":"mouseup",function(o){t(o.target).closest("a").removeClass("xActive");var s=n.onClick(i);return 0!=s&&i.destroy(),!1}),o.append(a)}),this.$.content.after(o),this.$.dialog.addClass("xDialog-has-footer")}},_setControl:function(){var t=this,i=this.options;i.controlBtnMin&&(this.$.control.append('<a href="javascript:;" class="xDialog-control-min"><i></i></a>'),this.$.control.find(".xDialog-control-min").on("click tap",function(){return i.onMin(t)===!1?!1:void t.hide()})),i.controlBtnMax&&(this.$.control.append('<a href="javascript:;" class="xDialog-control-max"><i></i></a>'),this.$.control.find(".xDialog-control-max").on("click tap",function(){if(t.$.dialog.hasClass("xDialog-max")){if(i.onRestore(t)===!1)return!1;t.$.dialog.removeClass("xDialog-max").attr("style",t.$.dialog.data("style-cache"))}else{if(i.onMax(t)===!1)return!1;t.$.dialog.addClass("xDialog-max").data("style-cache",t.$.dialog.attr("style")).attr("style","display:block;z-index:"+t.$.dialog.css("z-index"))}})),i.controlBtnClose&&(this.$.control.append('<a href="javascript:;" class="xDialog-control-close"><i></i></a>'),this.$.control.find(".xDialog-control-close").on("click tap",function(){t.destroy()}))},_setProperty:function(){var t=this,i=this.options,o=this.$.dialog;if(i.className&&o.addClass(i.className),i.id&&o.attr("id",i.id),i.width&&o.css("width",i.width),i.height&&o.css("height",i.height),i.esc&&this.$.fn.filter(".xDialog-mask,.xDialog").one("keyup",function(o){27==o.keyCode&&("hide"===i.esc?t.hide():"destroy"===i.esc&&t.destroy())}),i.right&&o.css("right",i.right),i.bottom&&o.css("bottom",i.bottom),i.top||i.bottom)i.top&&o.css({top:i.top,"margin-top":0}),i.bottom&&o.css({bottom:i.bottom,"margin-top":0});else{var s=this.options.height?this.options.height:"function"==typeof o.outerHeight?o.outerHeight():o.height();o.css({top:"50%","margin-top":-s/2})}if(i.left||i.right)i.left&&o.css({left:i.left,"margin-left":0}),i.right&&o.css({right:i.right,"margin-left":0});else{var n=this.options.width?this.options.width:"function"==typeof o.outerWidth?o.outerWidth():o.width();o.css({left:"50%","margin-left":-n/2})}},hide:function(t){if(this.options.onHide(this)===!1)return!1;var i=this;this.$.dialog.one("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){i.$.fn.hide(),t&&t()}),this.$.dialog.removeClass(this.options.showClassName).addClass(this.options.hideClassName),this.options.model&&this.$.model.addClass("xDialog-mask-hide")},show:function(){return this.options.onShow(this)===!1?!1:(this.$.dialog.removeClass(this.options.hideClassName).addClass(this.options.showClassName).css("zIndex",++t.xDialog._zIndex).show().focus(),void(this.options.model&&this.$.fn.show().removeClass("xDialog-mask-hide")))},destroy:function(){if(this.options.onDestroy(this)===!1)return!1;var t=this;this.hide(function(){t.$.fn.remove(),t=null})}},new o(i)},t.fn.xDialog=function(i){return i=t.extend({},i,{target:t(this)}),console.debug(i),t.xDialog(i)},t.xDialog._zIndex=1e5}(window.jQuery||window.Zepto),function(t){t.fn.xLoading=function(i){var o=t(this),s=o.children(".xLoading");if(i){if(clearTimeout(o.data("loadingT")),s.length)return!1;var n='<div class="xLoading"><div class="xLoading-container"><div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div></div></div>';o.append(n)}else loadingT=setTimeout(function(){s.one("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){s.remove()}),s.addClass("xLoading-hide")},500),o.data("loadingT",loadingT)}}(window.jQuery||window.Zepto);var UI=UI||{};UI.loading=function(t){$("body").xLoading(t)},UI.alert=function(t,i,o){var s={content:t,buttons:[{label:"确定",className:"xDialog-btn xDialog-btn-primary xDialog-btn-block",onClick:function(){return"function"==typeof i?i():void 0}}]};o=$.extend({},s,o),$.xDialog(o)},UI.confirm=function(t,i,o){var s={content:t,buttons:[{label:"确定",className:"xDialog-btn xDialog-btn-primary",onClick:function(){return"function"==typeof i?i(!0):void 0}},{label:"取消",onClick:function(){return"function"==typeof i?i(!1):void 0}}]};o=$.extend({},s,o),$.xDialog(o)},UI.error=function(t,i,o){var s={content:t,buttons:[{label:"确定",className:"xDialog-btn xDialog-btn-danger xDialog-btn-block",onClick:function(){return"function"==typeof i?i(!0):void 0}}]};o=$.extend({},s,o),$.xDialog(o)},UI.success=function(t,i,o){var s={content:t,buttons:[{label:"确定",className:"xDialog-btn xDialog-btn-success xDialog-btn-block",onClick:function(){return"function"==typeof i?i(!0):void 0}}]};o=$.extend({},s,o),$.xDialog(o)},UI.notice=function(t,i){var o={delay:1500,direction:"cc",offset:20,className:"xDialog-notice "+(i&&i.className?i.className:""),content:t,width:200,height:40,minWidth:200,minHeight:40,model:!1,showClassName:"xDialog-slideIn",hideClassName:"xDialog-slideOut"};switch(i&&i.className&&delete i.className,i=$.extend({},o,i),i.direction){case"lt":var s=$(".xDialog.lt").last();i.className+=" lt",i.left=i.offset,i.top=i.offset;break;case"ct":var s=$(".xDialog.ct").last();i.className+=" ct",i.top=i.offset;break;case"rt":var s=$(".xDialog.rt").last();i.className+=" rt",i.right=i.offset,i.top=i.offset;break;case"lc":var s=$(".xDialog.lc").last();i.className+=" lc",i.left=i.offset;break;case"cc":var s=$(".xDialog.cc").last();i.className+=" cc";break;case"rc":var s=$(".xDialog.rc").last();i.className+=" rc",i.right=i.offset;break;case"lb":var s=$(".xDialog.lb").last();i.className+=" lb",i.left=i.offset,i.bottom=i.offset;break;case"cb":var s=$(".xDialog.cb").last();i.className+=" cb",i.bottom=i.offset;break;case"rb":var s=$(".xDialog.rb").last();i.className+=" rb",i.right=i.offset,i.bottom=i.offset}switch(i.direction){case"lt":case"ct":case"rt":s.length&&(i.top=s.offset().top+s.height()+i.offset/2);break;case"lb":case"cb":case"rb":s.length&&(i.bottom=$(window).height()-s.offset().top+i.offset/2)}var n=$.xDialog(i);setTimeout(function(){n.destroy()},i.delay)};